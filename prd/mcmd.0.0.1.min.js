!function t(e,n,r){function o(c,s){if(!n[c]){if(!e[c]){var u="function"==typeof require&&require;if(!s&&u)return u(c,!0);if(i)return i(c,!0);var a=new Error("Cannot find module '"+c+"'");throw a.code="MODULE_NOT_FOUND",a}var f=n[c]={exports:{}};e[c][0].call(f.exports,function(t){var n=e[c][1][t];return o(n?n:t)},f,f.exports,t,e,n,r)}return n[c].exports}for(var i="function"==typeof require&&require,c=0;c<r.length;c++)o(r[c]);return o}({1:[function(t,e){function n(){var t=document;if(t.currentScript)return t.currentScript.src;var e;try{a.b.c()}catch(n){e=n.stack,!e&&window.opera&&(e=(String(n).match(/of linked script \S+/g)||[]).join(" "))}if(e)return e=e.split(/[@ ]/g).pop(),e="("==e[0]?e.slice(1,-1):e,e.replace(/(:\d+)?:\d+$/i,"");for(var r,o=head.getElementsByTagName("script"),i=0;r=o[i++];)if("interactive"===r.readyState)return r.className=r.src}function r(t){var e=t.match(/require\(.+?\)/g);return e&&(e=e.map(function(t){return t.replace(/(^require\(['"])|(['"]\)$)/g,"")})),e}var o=(t("./util"),t("./promise")),i=t("./module");e.exports=function(t){var e=n().replace(location.origin,""),c=mcmd.modules[e],s=c.dependences=r(t.toString());c.factory=t,s?o.all(s.map(function(t){return new o(function(e,n){t=mcmd.config.root+t;var r=mcmd.modules[t]||i.create(t);r.on("complate",e),r.on("error",n)})})).then(function(){c.setStatus(mcmd.MODULE_STATUS.COMPLETED)},function(t){c.setStatus(mcmd.MODULE_STATUS.ERROR,t)}):c.setStatus(mcmd.MODULE_STATUS.COMPLETED)}},{"./module":4,"./promise":5,"./util":8}],2:[function(t,e){var n=t("./promise"),r=t("./module"),o=t("./util");e.exports=function(t,e){return new n(function(n,i){var c=mcmd.modules[t]||r.create(t);c.on("complate",function(){var t=o.getModuleExports(c);"function"==typeof e&&e(t),n(t)}),c.on("error",i)})}},{"./module":4,"./promise":5,"./util":8}],3:[function(t){var e=window;e.define=t("./define"),e.mcmd={use:t("./use"),require:t("./require"),modules:{},config:{root:"/"},setConfig:function(t){for(var e in t)this.config[e]=t[e]},MODULE_STATUS:{PENDDING:0,LOADING:1,COMPLETED:2,ERROR:3}}},{"./define":1,"./require":6,"./use":7}],4:[function(t,e){function n(t){mcmd.modules[t]=this,this.id=t,this.status=mcmd.MODULE_STATUS.PENDDING,this.factory=null,this.dependences=null,this.callbacks={},this.load()}n.create=function(t){return new n(t)},n.prototype.load=function(){var t=this.id,e=document.createElement("script");e.src=t,e.onerror=function(){this.setStatus(mcmd.MODULE_STATUS.ERROR,{id:t,error:this.error=new Error("module can not load.")})}.bind(this),document.head.appendChild(e),this.setStatus(mcmd.MODULE_STATUS.LOADING)},n.prototype.on=function(t,e){(this.callbacks[t]||(this.callbacks[t]=[])).push(e),(this.status===mcmd.MODULE_STATUS.LOADING&&"load"===t||this.status===mcmd.MODULE_STATUS.COMPLETED&&"complate"===t)&&e(this),this.status===mcmd.MODULE_STATUS.ERROR&&"error"===t&&e(this,this.error)},n.prototype.fire=function(t,e){(this.callbacks[t]||[]).forEach(function(t){t(e||this)}.bind(this))},n.prototype.setStatus=function(t,e){if(this.status!==t)switch(this.status=t,t){case mcmd.MODULE_STATUS.LOADING:this.fire("load");break;case mcmd.MODULE_STATUS.COMPLETED:this.fire("complate");break;case mcmd.MODULE_STATUS.ERROR:this.fire("error",e)}},e.exports=n},{}],5:[function(t,e){var n=0,r=1,o=2,i=function(t){if("function"!=typeof t)throw"Promise resolver is not a function";var e=this,r=function(t){e.resolve(t)},o=function(t){e.reject(t)};e._status=n,e._onResolved=[],e._onRejected=[],t(r,o)},c=i.prototype;c.then=function(t,e){var n=this;return new i(function(c,s){var u=function(e){var n=t?t(e):e;i.isPromise(n)?n.then(function(t){c(t)}):c(n)},a=function(t){var n=e?e(t):t;s(n)};n._onResolved.push(u),n._onRejected.push(a),n._status===r&&u(n._value),n._status===o&&a(n._value)})},c.catch=function(t){return this.then(null,t)},c.resolve=function(t){if(this._status===n){this._status=r,this._value=t;for(var e=0,o=this._onResolved.length;o>e;e++)this._onResolved[e](t)}},c.reject=function(t){if(this._status===n){this._status=o,this._value=t;for(var e=0,r=this._onRejected.length;r>e;e++)this._onRejected[e](t)}},i.all=function(t){return new i(function(e,n){for(var r=t.length,o=-1,i=0,c=[];++o<r;)~function(o){t[o].then(function(t){c[o]=t,++i===r&&e(c)},function(t){n(t)})}(o)})},i.race=function(t){return new i(function(e,n){for(var r=t.length,o=-1;++o<r;)t[o].then(function(t){e(t)},function(t){n(t)})})},i.resolve=function(t){return i.isPromise(t)?t:new i(function(t){t()})},i.reject=function(t){return i.isPromise(t)?t:new i(function(t,e){e()})},i.isPromise=function(t){return t instanceof i},e.exports=i},{}],6:[function(t,e){var n=t("./util");e.exports=function(t){t=mcmd.config.root+t;var e=mcmd.modules[t];if(e)return n.getModuleExports(e);throw"can not get module by from:"+t},e.exports.async=function(t,e){mcmd.use(t,e)}},{"./util":8}],7:[function(t,e){var n=t("./promise"),r=t("./load");e.exports=function(t,e){Array.isArray(t)||(t=[t]),n.all(t.map(function(t){return r(mcmd.config.root+t)})).then(function(t){"function"==typeof e&&e.apply(window,t)},function(t){throw t})}},{"./load":2,"./promise":5}],8:[function(t,e){e.exports={getModuleExports:function(t){return t.exports||(t.exports={},t.factory(mcmd.require,t.exports,t)),t.exports}}},{}]},{},[3]);