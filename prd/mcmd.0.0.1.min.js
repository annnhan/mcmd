!function t(n,e,r){function o(c,u){if(!e[c]){if(!n[c]){var s="function"==typeof require&&require;if(!u&&s)return s(c,!0);if(i)return i(c,!0);var a=new Error("Cannot find module '"+c+"'");throw a.code="MODULE_NOT_FOUND",a}var f=e[c]={exports:{}};n[c][0].call(f.exports,function(t){var e=n[c][1][t];return o(e?e:t)},f,f.exports,t,n,e,r)}return e[c].exports}for(var i="function"==typeof require&&require,c=0;c<r.length;c++)o(r[c]);return o}({1:[function(t,n){function e(){var t=document;if(t.currentScript)return t.currentScript.src;var n;try{a.b.c()}catch(e){n=e.stack,!n&&window.opera&&(n=(String(e).match(/of linked script \S+/g)||[]).join(" "))}if(n)return n=n.split(/[@ ]/g).pop(),n="("==n[0]?n.slice(1,-1):n,n.replace(/(:\d+)?:\d+$/i,"");for(var r,o=head.getElementsByTagName("script"),i=0;r=o[i++];)if("interactive"===r.readyState)return r.className=r.src}function r(t){var n=t.match(/require\(.+?\)/g);return n&&(n=n.map(function(t){return t.replace(/(^require\(['"])|(['"]\)$)/g,"")})),n}var o=(t("./util"),t("./promise")),i=t("./module");n.exports=function(t){var n=e().replace(location.origin,""),c=mcmd.modules[n],u=c.dependences=r(t.toString());c.factory=t,u?o.all(u.map(function(t){return new o(function(n,e){t=mcmd.config.root+t;var r=mcmd.modules[t]||i.create(t);r.on("complate",function(){n()}),r.on("error",function(t){e(t)})})})).then(function(){c.setStatus(mcmd.MODULE_STATUS.COMPLETED)},function(t){c.setStatus(mcmd.MODULE_STATUS.ERROR,t)}):c.setStatus(mcmd.MODULE_STATUS.COMPLETED)}},{"./module":4,"./promise":5,"./util":8}],2:[function(t,n){var e=t("./promise"),r=t("./module"),o=t("./util");n.exports=function(t,n){return new e(function(e,i){var c=mcmd.modules[t]||r.create(t);c.on("complate",function(){var t=o.getModuleExports(c);"function"==typeof n&&n(t),e(t)}),c.on("error",i)})}},{"./module":4,"./promise":5,"./util":8}],3:[function(t){var n=window;n.define=t("./define"),n.mcmd={use:t("./use"),require:t("./require"),modules:{},config:{root:"/"},setConfig:function(t){for(var n in t)this.config[n]=t[n]},MODULE_STATUS:{PENDDING:0,LOADING:1,COMPLETED:2,ERROR:3}}},{"./define":1,"./require":6,"./use":7}],4:[function(t,n){function e(t){mcmd.modules[t]=this,this.id=t,this.status=mcmd.MODULE_STATUS.PENDDING,this.factory=null,this.dependences=null,this.callbacks={},this.load()}e.create=function(t){return new e(t)},e.prototype.load=function(){var t=this.id,n=document.createElement("script");n.src=t,n.onerror=function(){this.setStatus(mcmd.MODULE_STATUS.ERROR,{id:t,error:this.error=new Error("module can not load.")})}.bind(this),document.head.appendChild(n),this.setStatus(mcmd.MODULE_STATUS.LOADING)},e.prototype.on=function(t,n){(this.callbacks[t]||(this.callbacks[t]=[])).push(n),(this.status===mcmd.MODULE_STATUS.LOADING&&"load"===t||this.status===mcmd.MODULE_STATUS.COMPLETED&&"complate"===t)&&n(this),this.status===mcmd.MODULE_STATUS.ERROR&&"error"===t&&n(this,this.error)},e.prototype.fire=function(t,n){(this.callbacks[t]||[]).forEach(function(t){t(n||this)}.bind(this))},e.prototype.setStatus=function(t,n){if(this.status!==t)switch(this.status=t,t){case mcmd.MODULE_STATUS.LOADING:this.fire("load");break;case mcmd.MODULE_STATUS.COMPLETED:this.fire("complate");break;case mcmd.MODULE_STATUS.ERROR:this.fire("error",n)}},n.exports=e},{}],5:[function(t,n){var e=0,r=1,o=2,i=function(t){if("function"!=typeof t)throw"Promise resolver is not a function";var n=this,r=function(t){n.resolve(t)},o=function(t){n.reject(t)};n._status=e,n._onResolved=[],n._onRejected=[],t(r,o)},c=i.prototype;c.then=function(t,n){var e=this;return new i(function(c,u){var s=function(n){var e=t?t(n):n;i.isPromise(e)?e.then(function(t){c(t)}):c(e)},a=function(t){var e=n?n(t):t;u(e)};e._onResolved.push(s),e._onRejected.push(a),e._status===r&&s(e._value),e._status===o&&a(e._value)})},c.catch=function(t){return this.then(null,t)},c.resolve=function(t){if(this._status===e){this._status=r,this._value=t;for(var n=0,o=this._onResolved.length;o>n;n++)this._onResolved[n](t)}},c.reject=function(t){if(this._status===e){this._status=o,this._value=t;for(var n=0,r=this._onRejected.length;r>n;n++)this._onRejected[n](t)}},i.all=function(t){return new i(function(n,e){for(var r=t.length,o=-1,i=0,c=[];++o<r;)~function(o){t[o].then(function(t){c[o]=t,++i===r&&n(c)},function(t){e(t)})}(o)})},i.race=function(t){return new i(function(n,e){for(var r=t.length,o=-1;++o<r;)t[o].then(function(t){n(t)},function(t){e(t)})})},i.resolve=function(t){return i.isPromise(t)?t:new i(function(t){t()})},i.reject=function(t){return i.isPromise(t)?t:new i(function(t,n){n()})},i.isPromise=function(t){return t instanceof i},n.exports=i},{}],6:[function(t,n){var e=t("./util");n.exports=function(t){t=mcmd.config.root+t;var n=mcmd.modules[t];if(n)return e.getModuleExports(n);throw"can not get module by from:"+t},n.exports.async=function(t,n){mcmd.use(t,n)}},{"./util":8}],7:[function(t,n){var e=t("./promise"),r=t("./load");n.exports=function(t,n){Array.isArray(t)||(t=[t]),e.all(t.map(function(t){return r(mcmd.config.root+t)})).then(function(t){"function"==typeof n&&n.apply(window,t)},function(t){throw t})}},{"./load":2,"./promise":5}],8:[function(t,n){n.exports={getModuleExports:function(t){return t.exports||(t.exports={},t.factory(mcmd.require,t.exports,t)),t.exports}}},{}]},{},[3]);